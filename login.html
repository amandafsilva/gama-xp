<!DOCTYPE html>
<html>
<head>
	
	<title>Dataquest - Conteúdo para o sucesso do seu negócio</title>

	<meta charset="utf-8">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<meta name='description' content=''>

	<meta name='keywords' content=''>

	<meta name='author' content='Força-Tarefa'>

	<link rel="stylesheet" type="text/css" href="css/style.css">

	<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">

	<style>

		header {
			position: relative;
			flex-shrink: 0;
		}
		.login {
			display: flex;
			justify-content: center;
			background-color: #fff;
			background-size: cover;
			background-position: center;
			flex: 1 0 auto;
			padding: 1em;
			align-items: center;
			flex-direction: column;

		}

		.box-login {

			background-color: #e5e5e5;
			display: flex;
			flex-direction: column;
			justify-content: flex-start;
			padding: 1em;
			border-radius: 10px;
			flex-wrap: nowrap;
			padding-bottom: 25px;
		}
		.button-login {
			background-color: #60d760;
			height: 50px;
			border: 0;
			margin-top: 1em;
			padding: 1.5em;
			font-weight: bold;
			border: 0;
			border-radius: 5px;
			width: 50%;
			color: #fff;
			text-align: center;


		}

		.enviar {
			text-align: center;
		}
		.input-login {
			width: 100%;
			height: 30px;
			background-color: #fff;
			border-radius: 2px;
			padding-left: 4px;
			font-size: 14px;
			border: 0;

		}

		.email-user, .senha-user{
			padding-top: 15px;
		}
		.label-login{
    		flex-direction: column;
    		justify-content: flex-end;
    		color: #191919;
    		font-size: 0.8em;
    		margin-bottom: 20px;

		}
		.aviso {
			font-size: 0.6em;
			color: #191919;
			margin-top: 10px;
		}
		.recuperar {
			font-size: 0.6em;
			color: #191919;
			

		}
		.rec-senha {
			text-align: center;
		}

		.titulo {
			text-align: center;
		}

	</style>
</head>
<body>
	<header>
		<div class="header-body">
			<div class="header-logo">
				<img alt="Logo da Dataquest" src="img/logo.png" class="logo">
			</div>
				 <ul class='min950'>
					<li><a href="second-form.html">Fazer Pesquisa</a></li>
					<li><a href="#">Test</a></li>
					<li><a href="#">Test</a></li>
				</ul>
				<button class='openmenu' onClick='menu()'>
					<img src='img/menu.png' />
				</button>
			<div class='max550'>
				<button class='closemenu' onClick='menu()'>
					<img src='img/close.png' />
				</button>
				<ul class='max550ul'>
					<li><a href="#">Test</a></li>
					<li><a href="#">Test</a></li>
					<li><a href="#">Test</a></li>
				</ul>
			</div>
		</div>
	</header>
	<div class="login">
		<div class="box-login">
		<form onsubmit="login(event)">
				<p class="titulo"><b>Faça login para postar</b></p>
				<div class="email-user">
				<label class="label-login"> Login</label>
				<input type="text" name="email-login" maxlength="50" class="input-login" placeholder="voce@mail.com">
				</div>
				<div class="senha-user">
					<label class="label-login"> Senha</label>
					<input type="password" class="input-login" name="senha" maxlength="50">
				</div>
				<div class="rec-senha">
					<a href="rec-senha.html" class="recuperar"> Recuperar Senha</a>
				</div>
				<div class="enviar">
					<input type="submit" class="button-login" id="criarcadastro" value="Entrar">
					
				</div>
			</form>
		</div>
		<div class="aviso">Somente os administradores podem acessar essa área</div>
	</div>

	<footer>
		<div class="footer-body">
			<img src="img/logo.png" class="logofooter">
			<div>
				<p class="footer-title">Siga a nossa fanpage!</p>
				<div class="footer-container">
					<img src="img/fb-logo.png"/>
					<span class="footer-text">/dataquest</span>
				</div>
			</div>
		</div>
		<div class="footer-copyright">
			Dataquest © 2019. Todos os direitos reservados.
		</div>
	</footer>

	<script>
		function login(e){
			e.preventDefault()

			fetch('https://gamaexp17-1.herokuapp.com/userLog', { method: 'post', header: { 'Content-Type': 'application/json' }, body: JSON.stringify({
					email: document.querySelector('input[name="email-login"]').value,
					passwd: document.querySelector('input[name="senha"]').value
				}) 
			}).then((resp) => {
				if(resp.status == 200){
					resp.json().the((r) => {
						window.sessionStorage.setItem('token', r)
						window.location.href = 'newPost.html'
					})
				}else{
					resp.json().then((r) => {
						alert(r)
					})
				}
			}).catch(err => alert(err))
		}
	</script>

</body>
</html>