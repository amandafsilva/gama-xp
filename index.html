<!DOCTYPE html>
<html>
<head>
	<title>Dataquest - Conteúdo para o sucesso do seu negócio</title>

	<meta charset="utf-8">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<meta name='description' content=''>

	<meta name='keywords' content=''>

	<meta name='author' content='Força-Tarefa'>

	<link rel="stylesheet" type="text/css" href="css/style.css">

	<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
</head>
<body>
	<header>
		<div class="header-body">
			<div class="header-logo">
				<a href="index.html"><img src="img/logo.png"></a>
			</div>
		</div>
	</header>

	<div class="main-page-body">
		<div class="main-page-cover">
			<div class="color-overlay">
				<div class="cover-container">
					<span class="cover-title">Conteúdo de sucesso para o seu negócio</span>
					<a class="cover-button" href="second-form.html">Seu sucesso agora</a>
				</div>
			</div>
		</div>
	
		<div class="posts">
			
			<div id="coverPost">
	
				
	
			</div>
	
		</div>
	</div>

	<footer>
		<div class="footer-body">
			<div class="footer-logo">
				<img src="img/logo.png" class="logofooter">
			</div>
	 		<div>
				<p class="footer-title">Categorias</p>
			</div>
			<div>
				<p class="footer-title">Siga a gente nas redes sociais</p>
				<div class="footer-container">
					<img src="img/fb-logo.png"/>
					<span class="footer-text">/dataquest</span>
				</div>
			</div>
		</div>
		<div class="footer-copyright">
			Dataquest © 2019. Todos os direitos reservados.
		</div>
	</footer>

	<script>
		let menuOpen = false
		function menu() {
			if(menuOpen == false) {
				document.querySelector('.max550').style = 'transition: all .5s; left: 0;';
				menuOpen = true
			}else {
				document.querySelector('.max550').style = 'transition: all .5s; left: -50%';
				menuOpen = false;
			}
		}
	</script>


	<script type="text/javascript">
		let main = document.querySelector('#coverPost')
		fetch('https://gamaexp17-1.herokuapp.com/postAll').then((resp) => {
			if(resp.status == 200){
				resp.json().then((e) => {
					let posts = e.map((e) => {
						var a = document.createElement('a')
						//a.setAttribute('href', 'readPost')
						a.setAttribute('style', 'text-decoration: none; outline-style: none;')
						a.setAttribute('id', e._id)
						a.setAttribute('onclick', 'saveId(event, this.id)')
						var divpost = document.createElement('div')
						divpost.classList.add('post')
						divpost.setAttribute('id', e._id)
						var img = document.createElement('img')
						img.setAttribute('src', 'img/teste.png')
						divpost.append(img)
						var divtexts = document.createElement('div')
						divtexts.classList.add('coverTextsPost')
						var h3 = document.createElement('h3')
						h3.innerHTML = e.titulo
						divtexts.append(h3)
						var p = document.createElement('p')
						p.innerHTML = e.resumo
						divtexts.append(p)
						divpost.append(divtexts)
						a.append(divpost)
						return a
					})
					posts.map((e) => {main.appendChild(e)})
				})
			}else{
				alert('Não foi possivel achar o post');
			}
		}).catch((err) => alert(err))
	</script>

	<script type="text/javascript">
		function saveId(e, id){
			e.preventDefault()
			console.log(id)
			sessionStorage.setItem('id', id)
			window.location.href = 'readPost'
		}
	</script>

</body>
</html>