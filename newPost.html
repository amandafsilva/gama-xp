<!DOCTYPE html>
<html>
<head>

	<title></title>

	<meta charset="utf-8">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<meta name='description' content=''>

	<meta name='keywords' content=''>

	<meta name='author' content='Força-Tarefa'>

	<link rel="stylesheet" type="text/css" href="css/style.css">

	<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">

	<script src="https://cdn.ckeditor.com/ckeditor5/11.2.0/classic/ckeditor.js"></script>

	<style type="text/css">
		main {
			margin: 200px 0;
		}

		#editorPosi {
			width: 1024px;
			margin: auto;
		}
	</style>

</head>
<body>

	<header>
			<img src="img/logo.png" class="logo">
			<ul class='min950'>
				<li><a href="second-form.html">Fazer Pesquisa</a></li>
				<li><a href="#">Test</a></li>
				<li><a href="#">Test</a></li>
			</ul>
			<button class='openmenu' onClick='menu()'>
				<img src='img/menu.png' />
			</button>
		<div class='max550'>
			<button class='closemenu' onClick='menu()'>
				<img src='img/close.png' />
			</button>
			<ul class='max550ul'>
				<li><a href="#">Test</a></li>
				<li><a href="#">Test</a></li>
				<li><a href="#">Test</a></li>
			</ul>
		</div>
	</header>

	<main>

		<div id="editorPosi">
		<h1>Classic editor</h1>
			<form enctype="multipart/form-data" onsubmit="sendPost(event)">
			    <textarea name="content" id="editor">
			        
			    </textarea>
			    <input type="submit" name="" value="Enviar">
			</form>
		</div>

	</main>

	<footer>
		<div class="footer-body">
			<img src="img/logo.png" class="logofooter">
	 		<div>
				<p class="footer-title">Categorias</p>
			</div>
			<div>
				<p class="footer-title">Siga a gente nas redes sociais</p>
				<div class="footer-container">
					<img src="img/fb-logo.png"/>
					<span class="footer-text">/dataquest</span>
				</div>
			</div>
		</div>
		<div class="footer-copyright">
			Dataquest © 2019. Todos os direitos reservados.
		</div>
	</footer>

	<script>
		let menuOpen = false
		function menu(){
			if(menuOpen == false) {
				document.querySelector('.max550').style = 'transition: all .5s; left: 0;';
				menuOpen = true
			}else {
				document.querySelector('.max550').style = 'transition: all .5s; left: -50%';
				menuOpen = false;
			}
		}
	</script>

	<script>
		let myEditor;
        ClassicEditor
            .create( document.querySelector( '#editor' ) ).then(editor => myEditor = editor)
            .catch( error => {
                console.error( error );
            } );
    </script>

    <script type="text/javascript">
    	function sendPost(e){
    		e.preventDefault()

    		fetch('http://localhost:3000/post', { method: 'post', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({
    				text: myEditor.getData()
    			})
    		}).then((resp) => {
    			if(resp.status == 200){
    				resp.json().then((r) => {
    					alert('Cadastrado')
    				})
    			}else{
    				alert('Não cadastrou')
    			}
    		}).catch(err => alert(err))
    	}
    </script>

</body>
</html>